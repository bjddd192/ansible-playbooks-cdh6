<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<!--
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. See accompanying LICENSE file.
-->

<!-- Put site-specific property overrides in this file. -->
<configuration>
  <property>
    <name>dfs.namenode.name.dir</name>
    <value>{{ hadoop_dfs_name_path }}</value>
    <description>NameNode 元数据在本地文件系统永久存储的路径</description>
    <!-- 
        dfs.namenode.name.dir 属性可以配置多个目录，如 /data1/dfs/name，/data2/dfs/name ，/data3/dfs/name 等。
        各个目录存储的文件结构和内容都完全一样，相当于备份，这样做的好处是当其中一个目录损坏了，也不会影响到 Hadoop 的元数据，
        特别是当其中一个目录是 NFS（网络文件系统 Network File System，NFS）之上，即使你这台机器损坏了，元数据也得到保存。 
        由于使用了HA，建议仅设置一个。如果特别在意安全，可以设置2个
    -->
  </property>
  <property>
    <name>dfs.datanode.data.dir</name>
    <value>{{ hadoop_dfs_data_path }}</value>
    <description>设置datanode存放的路径</description>
  </property>
  <property>
    <name>dfs.namenode.http-address</name>
    <value>{{ hadoop_master_ip }}:{{ hadoop_dfs_namenode_http_port }}</value>
    <description>NN的HTTP地址和端口。0表示任意空闲端口。</description>
  </property>
  <property>
    <name>dfs.namenode.secondary.http-address</name>
    <value>{{ hadoop_master_ip }}:{{ hadoop_dfs_secondary_namenode_http_port }}</value>
    <description>SNN的http服务地址。如果是0，服务将随机选择一个空闲端口。使用了HA后，就不再使用SNN了</description>
  </property>
  <property>
    <name>dfs.replication</name>
    <value>{{ groups['hadoop-workers']|length }}</value>
    <description>数据块副本数量(伪分布式将其配置成1即可)</description>
  </property>
  <property>
    <name>dfs.webhdfs.enabled</name>
    <value>true</value>
    <description>WebHDFS 提供HDFS的RESTful接口，可通过此接口进行HDFS文件操作。 安装WebHDFS服务内置在HDFS中，不需额外安装、启动。</description>
  </property>
</configuration>
